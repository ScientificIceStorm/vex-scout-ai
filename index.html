<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>VEX Scout AI</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <div class="wrap">
    <header class="top">
      <h1>VEX Scout AI</h1>
      <div class="tag">Free • Cloudflare</div>
    </header>
    <p class="sub">Auto-load latest season → pick event → pick division → load matches → analyze teams → export CSV.</p>

    <!-- Seasons & Events -->
    <section class="card">
      <h2>Step 1 — Seasons & Events</h2>
      <div class="row">
        <label>Season</label>
        <select id="seasonSelect"><option>Loading seasons…</option></select>
        <button id="btnReloadSeasons">Reload</button>
      </div>
      <div class="row">
        <label>Event</label>
        <select id="eventSelect"><option>Pick a season first…</option></select>
      </div>
      <div class="row">
        <label>Division</label>
        <select id="divisionSelect"><option>Pick an event first…</option></select>
        <button id="btnLoadMatches" disabled>Load matches</button>
      </div>
      <div class="mini" id="status"></div>
    </section>

    <!-- Matches -->
    <section class="card" id="matchesCard" hidden>
      <h2>Step 2 — Matches</h2>
      <table class="grid" id="matchesTable">
        <thead>
          <tr><th>Match</th><th>Red</th><th>Blue</th><th>Scores</th><th></th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- YouTube -->
    <section class="card">
      <h2>Step 3 — Livestream / VOD</h2>
      <div class="row">
        <label>YouTube URL</label>
        <input id="youtubeUrl" placeholder="https://www.youtube.com/watch?v=..."/>
        <button id="btnCheckVideo">Check</button>
      </div>
      <div id="videoInfo" class="mini"></div>
    </section>

    <!-- Analysis -->
    <section class="card" id="analysisCard" hidden>
      <h2>Step 4 — Tag Strategy per Team</h2>
      <table class="grid" id="analysisTable">
        <thead>
          <tr>
            <th>Match</th><th>Team</th><th>Side</th>
            <th>Auton</th><th>Cycle</th><th>Defense</th><th>Endgame</th><th>Penalties</th>
            <th>Rating</th><th>Notes</th><th></th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="row" style="margin-top:8px">
        <button id="btnExport">Export CSV</button>
      </div>

      <h3 style="margin-top:20px">Suggested Alliances (Top 10)</h3>
      <table class="grid" id="allyTable">
        <thead><tr><th>Team A</th><th>Team B</th><th>Synergy</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <footer class="mini">Token stays server-side. No YouTube key in browser.</footer>
  </div>

  <script src="lib/analysis.js"></script>
  <script src="lib/youtube.js"></script>
  <script src="lib/robotevents.js"></script>
  <script src="app.js"></script>
</body>
</html>
